<div class="profile-page">
    <div class="profile-container">
        <div class="profile-header">
            <h1 class="profile-title">Мой профиль</h1>
            <button class="btn-edit-modern">
                <svg width="18"
                    height="18"
                    viewBox="0 0 24 24"
                    fill="none">
                    <path
                        d="M3 17.25V21H6.75L17.81 9.94L14.06 6.19L3 17.25ZM20.71 7.04C21.1 6.65 21.1 6.02 20.71 5.63L18.37 3.29C17.98 2.9 17.35 2.9 16.96 3.29L15.13 5.12L18.88 8.87L20.71 7.04Z"
                        fill="currentColor" />
                </svg>
                Редактировать профиль
            </button>
        </div>
        <div class="profile-main-card">
            <div class="profile-info-section">
                <div class="avatar-wrapper">
                    <div class="avatar-image">
                        <div *ngIf="!userImage"
                            class="avatar-placeholder">Г</div>
                    </div>
                </div>
                <div class="user-details">
                    <div class="user-name">{{ userNickname || 'Гость' }}</div>
                    <div class="user-stats">
                        <div class="stat-item">
                            <div class="stat-number">{{ favorites.length }}</div>
                            <div class="stat-label">Избранное</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-number">{{ watchLater.length }}</div>
                            <div class="stat-label">Смотреть позже</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-number">0</div>
                            <div class="stat-label">Просмотрено</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-number">0</div>
                            <div class="stat-label">Комментарии</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="profile-tabs">
            <div class="tab-item"
                [class.active]="activeTab === 'favorites'"
                (click)="loadCategoryData('favorites')">
                <svg width="20"
                    height="20"
                    viewBox="0 0 24 24"
                    fill="none">
                    <path
                        d="M12 21.35L10.55 20.03C5.4 15.36 2 12.28 2 8.5C2 5.42 4.42 3 7.5 3C9.24 3 10.91 3.81 12 5.09C13.09 3.81 14.76 3 16.5 3C19.58 3 22 5.42 22 8.5C22 12.28 18.6 15.36 13.45 20.04L12 21.35Z"
                        fill="currentColor" />
                </svg>
                Избранное
            </div>
            <div class="tab-item"
                [class.active]="activeTab === 'watchLater'"
                (click)="loadCategoryData('watchLater')">
                <svg width="20"
                    height="20"
                    viewBox="0 0 24 24"
                    fill="none">
                    <path
                        d="M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z"
                        stroke="currentColor"
                        stroke-width="2" />
                    <path d="M12 6V12L16 14"
                        stroke="currentColor"
                        stroke-width="2"
                        stroke-linecap="round" />
                </svg>
                Смотреть позже
            </div>
            <div class="tab-item"
                [class.active]="activeTab === 'watched'"
                (click)="loadCategoryData('watched')">
                <svg width="20"
                    height="20"
                    viewBox="0 0 24 24"
                    fill="none">
                    <path
                        d="M12 2C6.48 2 2 6.48 2 12C2 17.52 6.48 22 12 22C17.52 22 22 17.52 22 12C22 6.48 17.52 2 12 2ZM10 16.5L6.5 13L7.91 11.59L10 13.67L16.09 7.58L17.5 9L10 16.5Z"
                        fill="currentColor" />
                </svg>
                Просмотрено
            </div>
            <div class="tab-item"
                [class.active]="activeTab === 'comments'"
                (click)="loadCategoryData('comments')">
                <svg width="20"
                    height="20"
                    viewBox="0 0 24 24"
                    fill="none">
                    <path
                        d="M20 2H4C2.9 2 2 2.9 2 4V22L6 18H20C21.1 18 22 17.1 22 16V4C22 2.9 21.1 2 20 2ZM20 16H5.17L4 17.17V4H20V16Z"
                        fill="currentColor" />
                    <path d="M7 9H17V11H7V9ZM7 12H15V14H7V12Z"
                        fill="currentColor" />
                </svg>
                Комментарии
            </div>
        </div>
        <div class="tab-content">
            <div class="tab-panel"
                *ngIf="activeTab === 'favorites'">
                <ng-container *ngIf="isLoading">
                    <div class="cute-vertical-movies">
                        <div class="vertical-grid">
                            <div *ngFor="let i of [1,2,3,4,5,6,7,8,9,10,11,12]"
                                class="movie-card-vertical empty">
                                <div class="poster-wrapper">
                                    <div class="empty-poster"></div>
                                </div>
                                <div class="movie-info">
                                    <div class="empty-title"></div>
                                    <div class="empty-year"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </ng-container>
                <ng-container *ngIf="!isLoading">
                    <div *ngIf="favorites.length > 0"
                        class="cute-vertical-movies">
                        <div class="vertical-grid">
                            <div *ngFor="let film of favorites"
                                class="movie-card-vertical"
                                (click)="onClickPage(film)">
                                <div class="poster-wrapper">
                                    <img [src]="getPosterUrl(film.poster)"
                                        [alt]="film.title"
                                        class="poster-image">
                                    <button class="btn-remove-favorite"
                                        (click)="$event.stopPropagation(); onClickDelete(film)">
                                        <svg width="14"
                                            height="14"
                                            viewBox="0 0 24 24"
                                            fill="none">
                                            <path
                                                d="M6 19C6 20.1 6.9 21 8 21H16C17.1 21 18 20.1 18 19V7H6V19ZM19 4H15.5L14.5 3H9.5L8.5 4H5V6H19V4Z"
                                                fill="currentColor" />
                                        </svg>
                                    </button>
                                    <div class="movie-rating">{{ film.rating || '—' }}</div>
                                </div>
                                <div class="movie-info">
                                    <h3 class="movie-title">{{ film.title }}</h3>
                                    <p class="movie-year">{{ film.year }}</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div *ngIf="favorites.length === 0"
                        class="empty-state">
                        <div class="empty-icon">
                            <svg width="56"
                                height="56"
                                viewBox="0 0 24 24"
                                fill="none">
                                <path
                                    d="M12 21.35L10.55 20.03C5.4 15.36 2 12.28 2 8.5C2 5.42 4.42 3 7.5 3C9.24 3 10.91 3.81 12 5.09C13.09 3.81 14.76 3 16.5 3C19.58 3 22 5.42 22 8.5C22 12.28 18.6 15.36 13.45 20.04L12 21.35Z"
                                    fill="#ffd1dc" />
                            </svg>
                        </div>
                        <h3 class="empty-title">Пока ничего нет</h3>
                        <p class="empty-text">Фильмы, которые вы добавите в избранное, появятся здесь</p>
                    </div>
                </ng-container>
            </div>
            <!-- //later -->
            <div class="tab-panel"
                *ngIf="activeTab === 'watchLater'">
                <ng-container *ngIf="isLoading">
                    <div class="cute-vertical-movies">
                        <div class="vertical-grid">
                            <div *ngFor="let i of [1,2,3,4,5,6,7,8,9,10,11,12]"
                                class="movie-card-vertical empty">
                                <div class="poster-wrapper">
                                    <div class="empty-poster"></div>
                                </div>
                                <div class="movie-info">
                                    <div class="empty-title"></div>
                                    <div class="empty-year"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </ng-container>
                <ng-container *ngIf="!isLoading">
                    <div *ngIf="watchLater.length > 0"
                        class="cute-vertical-movies">
                        <div class="vertical-grid">
                            <div *ngFor="let film of watchLater"
                                class="movie-card-vertical"
                                (click)="onClickPage(film)">
                                <div class="poster-wrapper">
                                    <img [src]="getPosterUrl(film.poster)"
                                        [alt]="film.title"
                                        class="poster-image">
                                    <button class="btn-remove-favorite"
                                        (click)="$event.stopPropagation(); onClickDeleteFromLater(film)">
                                        <svg width="14"
                                            height="14"
                                            viewBox="0 0 24 24"
                                            fill="none">
                                            <path
                                                d="M6 19C6 20.1 6.9 21 8 21H16C17.1 21 18 20.1 18 19V7H6V19ZM19 4H15.5L14.5 3H9.5L8.5 4H5V6H19V4Z"
                                                fill="currentColor" />
                                        </svg>
                                    </button>
                                    <div class="movie-rating">{{ film.rating || '—' }}</div>
                                </div>
                                <div class="movie-info">
                                    <h3 class="movie-title">{{ film.title }}</h3>
                                    <p class="movie-year">{{ film.year }}</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div *ngIf="watchLater.length === 0"
                        class="empty-state">
                        <div class="empty-icon">
                            <svg width="56"
                                height="56"
                                viewBox="0 0 24 24"
                                fill="none">
                                <path
                                    d="M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z"
                                    stroke="#ffd1dc"
                                    stroke-width="2" />
                                <path d="M12 6V12L16 14"
                                    stroke="#ffd1dc"
                                    stroke-width="2"
                                    stroke-linecap="round" />
                            </svg>
                        </div>
                        <h3 class="empty-title">Список пуст</h3>
                        <p class="empty-text">Фильмы, которые вы отложите на потом, появятся здесь</p>
                    </div>
                </ng-container>
            </div>
            <div class="tab-panel"
                *ngIf="activeTab === 'watched'">
                <div *ngIf="isLoading"
                    class="cute-vertical-movies">
                    <div class="vertical-grid">
                        <div *ngFor="let i of [1,2,3,4,5,6,7,8,9,10,11,12]"
                            class="movie-card-vertical empty">
                            <div class="poster-wrapper">
                                <div class="empty-poster"></div>
                            </div>
                            <div class="movie-info">
                                <div class="empty-title"></div>
                                <div class="empty-year"></div>
                            </div>
                        </div>
                    </div>
                </div>
                <div *ngIf="!isLoading"
                    class="empty-state">
                    <div class="empty-icon">
                        <svg width="56"
                            height="56"
                            viewBox="0 0 24 24"
                            fill="none">
                            <path
                                d="M12 2C6.48 2 2 6.48 2 12C2 17.52 6.48 22 12 22C17.52 22 22 17.52 22 12C22 6.48 17.52 2 12 2ZM10 16.5L6.5 13L7.91 11.59L10 13.67L16.09 7.58L17.5 9L10 16.5Z"
                                fill="#ffd1dc" />
                        </svg>
                    </div>
                    <h3 class="empty-title">Еще не смотрели</h3>
                    <p class="empty-text">Фильмы, которые вы посмотрите, появятся здесь</p>
                </div>
            </div>
            <div class="tab-panel"
                *ngIf="activeTab === 'comments'">
                <div *ngIf="isLoading"
                    class="cute-vertical-movies">
                    <div class="vertical-grid">
                        <div *ngFor="let i of [1,2,3,4,5,6,7,8,9,10,11,12]"
                            class="movie-card-vertical empty">
                            <div class="poster-wrapper">
                                <div class="empty-poster"></div>
                            </div>
                            <div class="movie-info">
                                <div class="empty-title"></div>
                                <div class="empty-year"></div>
                            </div>
                        </div>
                    </div>
                </div>
                <div *ngIf="!isLoading"
                    class="empty-state">
                    <div class="empty-icon">
                        <svg width="56"
                            height="56"
                            viewBox="0 0 24 24"
                            fill="none">
                            <path
                                d="M20 2H4C2.9 2 2 2.9 2 4V22L6 18H20C21.1 18 22 17.1 22 16V4C22 2.9 21.1 2 20 2ZM20 16H5.17L4 17.17V4H20V16Z"
                                fill="#ffd1dc" />
                            <path d="M7 9H17V11H7V9ZM7 12H15V14H7V12Z"
                                fill="#ffd1dc" />
                        </svg>
                    </div>
                    <h3 class="empty-title">Нет комментариев</h3>
                    <p class="empty-text">Ваши комментарии к фильмам появятся здесь</p>
                </div>
            </div>
        </div>
        <div class="profile-actions-bottom">
            <button class="btn-delete-account">
                <svg width="18"
                    height="18"
                    viewBox="0 0 24 24"
                    fill="none">
                    <path
                        d="M6 19C6 20.1 6.9 21 8 21H16C17.1 21 18 20.1 18 19V7H6V19ZM19 4H15.5L14.5 3H9.5L8.5 4H5V6H19V4Z"
                        fill="currentColor" />
                </svg>
                Удалить аккаунт
            </button>
            <button class="btn-logout">
                <svg width="18"
                    height="18"
                    viewBox="0 0 24 24"
                    fill="none">
                    <path
                        d="M17 7L15.59 8.41L18.17 11H8V13H18.17L15.59 15.58L17 17L22 12L17 7ZM4 5H12V3H4C2.9 3 2 3.9 2 5V19C2 20.1 2.9 21 4 21H12V19H4V5Z"
                        fill="currentColor" />
                </svg>
                Выйти из аккаунта
            </button>
        </div>
    </div>
</div>