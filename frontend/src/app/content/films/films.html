<div class="movie-page">
    <div class="movie-container">
        <div class="movie-main-card">
            <div class="movie-header">
                <div class="poster-section">
                    <div class="poster-wrapper">
                        <img [src]="getPosterUrl(movie?.poster)"
                            class="movie-poster">

                        <div class="watched-indicator">
                            <svg width="16"
                                height="16"
                                viewBox="0 0 24 24"
                                fill="none">
                                <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"
                                    fill="white" />
                            </svg>
                        </div>
                        <div class="movie-rating">{{ movie?.rating }}</div>
                    </div>
                    <div class="action-buttons">
                        <button class="btn-watch">
                            <svg width="20"
                                height="20"
                                viewBox="0 0 24 24"
                                fill="none">
                                <path d="M10 8L16 12L10 16V8Z"
                                    fill="white" />
                            </svg>
                            Смотреть онлайн
                        </button>
                        <button class="btn-favorite"
                            [class.favorite]="isFavorite"
                            (click)="onClickFavorite(movie)">
                            <svg width="20"
                                height="20"
                                viewBox="0 0 24 24"
                                fill="none">
                                <path *ngIf="!isFavorite"
                                    d="M12 21.35L10.55 20.03C5.4 15.36 2 12.28 2 8.5C2 5.42 4.42 3 7.5 3C9.24 3 10.91 3.81 12 5.09C13.09 3.81 14.76 3 16.5 3C19.58 3 22 5.42 22 8.5C22 12.28 18.6 15.36 13.45 20.04L12 21.35Z"
                                    fill="none"
                                    stroke="currentColor"
                                    stroke-width="1.5" />
                                <path *ngIf="isFavorite"
                                    d="M12 21.35L10.55 20.03C5.4 15.36 2 12.28 2 8.5C2 5.42 4.42 3 7.5 3C9.24 3 10.91 3.81 12 5.09C13.09 3.81 14.76 3 16.5 3C19.58 3 22 5.42 22 8.5C22 12.28 18.6 15.36 13.45 20.04L12 21.35Z"
                                    fill="#ff85a2"
                                    stroke="#ff85a2"
                                    stroke-width="1.5" />
                            </svg>
                            {{ isFavorite ? 'В избранном' : 'В избранное' }}
                        </button>
                        <button class="btn-later"
                            [class.later]="isLater"
                            (click)="onClickLater(movie)">
                            <svg width="20"
                                height="20"
                                viewBox="0 0 24 24"
                                fill="none">
                                <path [class.later-path]="isLater"
                                    d="M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z"
                                    stroke="currentColor"
                                    stroke-width="1.5" />
                                <path [class.later-path]="isLater"
                                    d="M12 6V12L16 14"
                                    stroke="currentColor"
                                    stroke-width="1.5"
                                    stroke-linecap="round" />
                            </svg>
                            {{ isLater ? 'Добавлено' : 'Посмотреть позже' }}
                        </button>
                    </div>
                </div>
                <div class="movie-info">
                    <h1 class="movie-title-main">{{ movie?.title }}</h1>
                    <div class="movie-details-enhanced">
                        <div class="details-column">
                            <div class="detail-card">
                                <div class="detail-label">Актеры:</div>
                                <div class="detail-value">{{ movie?.actors }}</div>
                            </div>
                            <div class="detail-card">
                                <div class="detail-label">Режиссер:</div>
                                <div class="detail-value">{{ movie?.director }}</div>
                            </div>
                            <div class="detail-card">
                                <div class="detail-label">Сценарист:</div>
                                <div class="detail-value">{{ movie?.author }}</div>
                            </div>
                        </div>
                        <div class="details-column">
                            <div class="detail-card">
                                <div class="detail-label">Год:</div>
                                <div class="detail-value">{{ movie?.year }}</div>
                            </div>
                            <div class="detail-card">
                                <div class="detail-label">Жанры:</div>
                                <div class="detail-value">{{ movie?.genres }}</div>
                            </div>
                            <div class="detail-card">
                                <div class="detail-label">Страны:</div>
                                <div class="detail-value">{{ movie?.countries }}</div>
                            </div>
                        </div>
                    </div>
                    <div class="movie-description">
                        <h3 class="section-title">Описание</h3>
                        <p class="description-text">{{ movie?.description }}</p>
                    </div>
                </div>
            </div>
        </div>
        <div class="player-section">
            <div class="player-header">
                <h3 class="section-title">Смотреть онлайн</h3>
                <div class="player-controls">
                    <div class="control-group">
                        <span>Качество:</span>
                        <select class="control-select">
                            <option>Full HD</option>
                            <option>HD</option>
                            <option>SD</option>
                        </select>
                    </div>
                    <div class="control-group">
                        <span>Озвучка:</span>
                        <select class="control-select">
                            <option>Оригинал</option>
                            <option>Русская</option>
                            <option>Дублированная</option>
                        </select>
                    </div>
                    <div class="control-group">
                        <span>Субтитры:</span>
                        <select class="control-select">
                            <option>Русские</option>
                            <option>Английские</option>
                            <option>Отсутствуют</option>
                        </select>
                    </div>
                </div>
            </div>
            <div class="video-player">
                <div class="video-placeholder">
                    <div class="play-overlay">
                        <svg width="45"
                            height="45"
                            viewBox="0 0 24 24"
                            fill="none">
                            <path d="M10 8L16 12L10 16V8Z"
                                fill="#ff85a2" />
                        </svg>
                        <p>Нажмите для начала просмотра</p>
                    </div>
                </div>
            </div>
        </div>
        <h3 class="section-title similar-title">Похожие фильмы</h3>
        <div class="similar-section">
            <div class="vertical-grid">
                <ng-container *ngIf="loadingSimilar">
                    <div *ngFor="let i of [1,2,3,4]"
                        class="movie-card-vertical empty">
                        <div class="poster-wrapper">
                            <div class="empty-poster"></div>
                        </div>
                        <div class="movie-info">
                            <div class="empty-title"></div>
                            <div class="empty-year"></div>
                        </div>
                    </div>
                </ng-container>
                <ng-container *ngIf="!loadingSimilar">
                    <div *ngFor="let similar of similar_content"
                        class="movie-card-vertical"
                        (click)="onTheNextPageS(similar)">
                        <div class="poster-wrapper">
                            <img [src]="getPosterUrl(similar.poster)"
                                class="poster-image">
                            <div class="movie-rating">{{ similar.rating }}</div>
                        </div>
                        <div class="movie-info">
                            <h3 class="movie-title">{{ similar.title }}</h3>
                            <p class="movie-year">{{ similar.year }}</p>
                        </div>
                    </div>

                    <div *ngFor="let i of getRemainingSkeletons()"
                        class="movie-card-vertical empty">
                        <div class="poster-wrapper">
                            <div class="empty-poster"></div>
                        </div>
                        <div class="movie-info">
                            <div class="empty-title"></div>
                            <div class="empty-year"></div>
                        </div>
                    </div>
                </ng-container>
            </div>
        </div>
        <div class="comments-section">
            <h3 class="section-title">Комментарии</h3>

            <div class="comment-form">
                <input type="text"
                    placeholder="Оставьте ваш комментарий..."
                    class="comment-input">
                <button class="btn-comment">Отправить</button>
            </div>
            <div class="comments-list">
                <div class="comment">
                    <div class="comment-avatar">А</div>
                    <div class="comment-content">
                        <div class="comment-header">
                            <span class="comment-author">Алексей Петров</span>
                            <span class="comment-date">2 часа назад</span>
                        </div>
                        <div class="comment-text">
                            Отличный фильм! Смотрел уже три раза, и каждый раз нахожу что-то новое.
                        </div>
                    </div>
                </div>
                <div class="comment">
                    <div class="comment-avatar">М</div>
                    <div class="comment-content">
                        <div class="comment-header">
                            <span class="comment-author">Мария Иванова</span>
                            <span class="comment-date">5 часов назад</span>
                        </div>
                        <div class="comment-text">
                            Визуальные эффекты просто потрясающие, но сюжет немного предсказуем.
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>